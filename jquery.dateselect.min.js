/*
 *  $ Dateselect 1.0.5
 *
 *  https://github.com/jcchavezs/jquery-dateselect
 *
 *  Depends:
 *    jQuery
 **/

!function(e){e.fn.dateselect=function(t){function a(e){return e%4!==0||e%100===0&&e%400!==0?!1:!0}function n(e){return e=parseInt(e),10>e?"0"+e.toString():e}function s(e){var t,a=function(e,t){return e=parseInt(e,10).toString(16),t<e.length?e.slice(e.length-t):t>e.length?Array(1+(t-e.length)).join("0")+e:e};return this.php_js||(this.php_js={}),this.php_js.uniqidSeed||(this.php_js.uniqidSeed=Math.floor(123456789*Math.random())),this.php_js.uniqidSeed++,t=e,t+=a(parseInt((new Date).getTime()/1e3,10),8),t+=a(this.php_js.uniqidSeed,5)}t=e.extend({},e.fn.dateselect.defaults,t);var l=[31,28,31,30,31,30,31,31,30,31,30,31];this.each(function(i,d){if(e(d).addClass("dateselect-input").hide(),""===d.id&&(d.id=s("ds")),"undefined"==typeof d.tabindex&&(d.tabindex=0),!(e("#dateselect-"+d.id).length>0)){var r,c,o,p=[],u=new Date,h=""===d.value||"0000-00-00"===d.value||null===(r=d.value.match(/[0-9]{4}-[0-9]{2}-[0-9]{2}/))?!1:!0;if(h){var m=r[0].split("-"),f=parseInt(m[0]),v=parseInt(m[1]),y=parseInt(m[2]);d.value=r[0]}o=e("<div />",{id:"dateselect-"+d.id,"class":"dateselect "+t.cssClass});var b={style:"width: auto !important; min-width: 0 !important",tabindex:e(d).attr("tabindex")};e.each(t.order,function(a,n){e.extend(b,{id:d.id+"-"+n,"class":"dateselect-selector dateselect-"+n+" "+t.cssClassSelector}),h||(b.html='<option class="dateselect-empty" value="">'+t.selectOne[n]+"</option>"),p[n]=e("<select />",b).appendTo(o).after("&nbsp;")});var g=u.getYear()>1900?0:1900;for(t.minYear<1900&&(t.minYear=g+u.getYear()+t.minYear),t.maxYear<1900&&(t.maxYear=g+u.getYear()+t.maxYear),c=t.maxYear;c>=t.minYear;c--)p.year.append("<option "+(h&&c===f?'selected="selected"':"")+' value="'+c+'">'+c+"</option>");for(c in t.monthNames)p.month.append("<option "+(h&&parseInt(c)+1===v?'selected="selected"':"")+' value="'+(parseInt(c)+1)+'">'+t.monthNames[c]+"</option>");for(c=1;31>=c;c++)p.day.append("<option "+(h&&c===y?'selected="selected"':"")+' value="'+c+'">'+n(c)+"</option>");e(d).hide().before(o),e("body").on("change","select.dateselect-selector",function(){var s=e(this),i=s.parent().next();""!==s.val()&&s.find("option.dateselect-empty").remove();var d=o.find("select.dateselect-month").val(),r=o.find("select.dateselect-year").val(),c=o.find("select.dateselect-day").val();if(!s.hasClass("dateselect-day")){var p=Math.max(1,d),u=2===p&&a(r)?l[p-1]+1:l[p-1];o.find("select.dateselect-day option.dateselect-numeric").remove(),c=Math.min(c,u);for(var h=1;u>=h;h++)o.find("select.dateselect-day").append('<option class="dateselect-numeric" '+(c==h?'selected="selected"':"")+' value="'+h+'">'+n(h)+"</option>")}""!==r&&""!==d&&""!==c?(i.val(n(r)+"-"+n(d)+"-"+n(c)),t.callback.apply(i.get(0),[new Date(r,d,c)])):i.val(""),i.bind("focus")})}})},e.fn.dateselect.defaults={cssClass:"",cssClassSelector:"",maxYear:0,minYear:-100,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],order:["day","month","year"],selectOne:{day:"Day",month:"Month",year:"Year"},callback:function(){}}}(jQuery);